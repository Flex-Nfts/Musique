<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SoundWave â€” Music Player</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-deep: #0d0f14;
    --bg-panel: #13161e;
    --bg-card: #1a1e2a;
    --bg-hover: #1f2436;
    --accent: #4f6ef7;
    --accent-soft: rgba(79,110,247,0.15);
    --accent-glow: rgba(79,110,247,0.4);
    --text-primary: #e8eaf2;
    --text-secondary: #6b7394;
    --text-muted: #3d4260;
    --border: rgba(255,255,255,0.05);
    --sidebar-w: 230px;
    --player-h: 76px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg-deep);
  }

  /* â”€â”€ APP SHELL â”€â”€ */
  .app {
    width: 100vw;
    height: 100vh;
    background: var(--bg-deep);
    border-radius: 0;
    overflow: hidden;
    display: grid;
    grid-template-columns: var(--sidebar-w) 1fr;
    grid-template-rows: 1fr var(--player-h);
    position: relative;
  }

  /* â”€â”€ SIDEBAR â”€â”€ */
  .sidebar {
    background: var(--bg-panel);
    border-right: 1px solid var(--border);
    grid-row: 1 / 3;
    display: flex;
    flex-direction: column;
    padding: 24px 16px;
    gap: 0;
  }

  .sidebar-section-label {
    font-family: 'Syne', sans-serif;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--text-muted);
    padding: 0 8px;
    margin-bottom: 8px;
    margin-top: 24px;
  }
  .sidebar-section-label:first-child { margin-top: 0; }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 9px 10px;
    border-radius: 8px;
    cursor: pointer;
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: 400;
    transition: all 0.18s;
    text-decoration: none;
    user-select: none;
  }
  .nav-item:hover { color: var(--text-primary); background: var(--bg-hover); }
  .nav-item.active {
    background: var(--accent);
    color: #fff;
    font-weight: 500;
  }
  .nav-item svg { width: 16px; height: 16px; flex-shrink: 0; opacity: 0.9; }

  .sidebar-spacer { flex: 1; }

  .create-btn {
    display: flex;
    align-items: center;
    gap: 9px;
    padding: 9px 10px;
    border-radius: 8px;
    cursor: pointer;
    color: var(--text-muted);
    font-size: 13px;
    transition: all 0.18s;
  }
  .create-btn:hover { color: var(--text-secondary); }
  .create-btn svg { width: 16px; height: 16px; }

  /* â”€â”€ MAIN CONTENT â”€â”€ */
  .main {
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* â”€â”€ TOPBAR â”€â”€ */
  .topbar {
    display: flex;
    align-items: center;
    padding: 18px 32px;
    gap: 14px;
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
  }

  .nav-arrows { display: flex; gap: 4px; }
  .nav-arrows button {
    width: 28px; height: 28px;
    border-radius: 50%;
    border: 1px solid var(--border);
    background: var(--bg-card);
    color: var(--text-secondary);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: all 0.15s;
  }
  .nav-arrows button:hover { color: var(--text-primary); background: var(--bg-hover); }
  .nav-arrows svg { width: 12px; height: 12px; }

  .search-bar {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 8px 14px;
    max-width: 380px;
    transition: border-color 0.2s;
  }
  .search-bar:focus-within { border-color: rgba(79,110,247,0.4); }
  .search-bar svg { width: 14px; height: 14px; color: var(--text-muted); flex-shrink: 0; }
  .search-bar input {
    background: none;
    border: none;
    outline: none;
    color: var(--text-primary);
    font-size: 13px;
    font-family: inherit;
    width: 100%;
  }
  .search-bar input::placeholder { color: var(--text-muted); }

  .topbar-right { margin-left: auto; display: flex; align-items: center; gap: 10px; }
  .login-btn {
    font-size: 13px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: color 0.15s;
  }
  .login-btn:hover { color: var(--text-primary); }
  .more-btn {
    width: 28px; height: 28px;
    border-radius: 50%;
    border: 1px solid var(--border);
    background: none;
    color: var(--text-secondary);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
  }

  /* â”€â”€ VIEW CONTAINER â”€â”€ */
  .views { flex: 1; overflow: hidden; position: relative; }

  .view {
    position: absolute;
    inset: 0;
    overflow-y: auto;
    padding: 30px 36px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s;
  }
  .view.active { opacity: 1; pointer-events: all; }

  /* scrollbar */
  .view::-webkit-scrollbar { width: 4px; }
  .view::-webkit-scrollbar-track { background: transparent; }
  .view::-webkit-scrollbar-thumb { background: var(--text-muted); border-radius: 2px; }

  /* â”€â”€ EXPLORE VIEW â”€â”€ */
  .explore-section-title {
    font-family: 'Syne', sans-serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 18px;
  }

  .artist-grid {
    display: flex;
    gap: 18px;
    margin-bottom: 32px;
    overflow-x: auto;
    padding-bottom: 4px;
  }
  .artist-grid::-webkit-scrollbar { height: 3px; }
  .artist-grid::-webkit-scrollbar-thumb { background: var(--text-muted); border-radius: 2px; }

  .artist-card {
    flex-shrink: 0;
    width: 130px;
    cursor: pointer;
    transition: transform 0.2s;
  }
  .artist-card:hover { transform: translateY(-3px); }
  .artist-thumb {
    width: 130px;
    height: 130px;
    border-radius: 10px;
    object-fit: cover;
    background: var(--bg-card);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    margin-bottom: 8px;
    position: relative;
  }
  .artist-thumb-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 10px;
  }
  .artist-thumb-placeholder {
    width: 100%;
    height: 100%;
    border-radius: 10px;
    background: linear-gradient(135deg, #1a1e2a, #2a2e3a);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Syne', sans-serif;
    font-size: 34px;
    font-weight: 800;
    color: var(--text-muted);
  }
  .artist-name {
    font-family: 'Syne', sans-serif;
    font-size: 12px;
    font-weight: 600;
    color: var(--text-primary);
  }
  .artist-song {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 2px;
  }

  .two-col { display: grid; grid-template-columns: 1fr 240px; gap: 24px; }

  /* Popular list */
  .popular-list { display: flex; flex-direction: column; gap: 4px; }
  .track-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 10px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.15s;
  }
  .track-row:hover { background: var(--bg-hover); }
  .track-row.playing { background: var(--accent-soft); }
  .track-num {
    width: 20px;
    text-align: center;
    font-size: 12px;
    color: var(--text-muted);
    font-weight: 500;
    flex-shrink: 0;
  }
  .track-row.playing .track-num { color: var(--accent); }
  .track-thumb-sm {
    width: 36px; height: 36px;
    border-radius: 6px;
    background: var(--bg-card);
    flex-shrink: 0;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
  }
  .track-info { flex: 1; min-width: 0; }
  .track-title {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .track-row.playing .track-title { color: var(--accent); }
  .track-duration {
    font-size: 12px;
    color: var(--text-muted);
    flex-shrink: 0;
  }
  .track-more {
    width: 22px; height: 22px;
    border-radius: 50%;
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    opacity: 0;
    transition: opacity 0.15s;
  }
  .track-row:hover .track-more { opacity: 1; }

  /* Mood */
  .mood-section { }
  .mood-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-top: 0;
  }
  .mood-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px 12px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    text-align: center;
    transition: all 0.2s;
  }
  .mood-card:hover { background: var(--bg-hover); color: var(--text-primary); border-color: var(--accent-soft); }

  /* â”€â”€ ARTIST VIEW (Sound tab) â”€â”€ */
  .artist-header {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 24px;
  }
  .artist-cover {
    width: 90px; height: 90px;
    border-radius: 10px;
    object-fit: cover;
    background: linear-gradient(135deg, #2a1a3a, #1a2a3a);
    flex-shrink: 0;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
  }
  .artist-meta { flex: 1; }
  .artist-big-name {
    font-family: 'Syne', sans-serif;
    font-size: 32px;
    font-weight: 800;
    color: var(--text-primary);
    letter-spacing: -0.02em;
    line-height: 1;
    margin-bottom: 4px;
  }
  .artist-subtitle {
    font-size: 13px;
    color: var(--text-secondary);
    margin-bottom: 14px;
  }
  .artist-actions { display: flex; gap: 8px; align-items: center; }
  .follow-btn {
    padding: 7px 20px;
    border-radius: 8px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--text-primary);
    font-size: 13px;
    font-family: inherit;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.18s;
  }
  .follow-btn:hover { background: var(--bg-hover); border-color: var(--accent); }
  .dots-btn {
    width: 34px; height: 34px;
    border-radius: 8px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    font-size: 16px;
    letter-spacing: 2px;
  }

  .artist-followers {
    writing-mode: vertical-rl;
    transform: rotate(180deg);
    font-size: 10px;
    color: var(--text-muted);
    letter-spacing: 0.06em;
    align-self: flex-end;
  }

  /* Tabs */
  .tabs {
    display: flex;
    gap: 0;
    border-bottom: 1px solid var(--border);
    margin-bottom: 20px;
  }
  .tab-btn {
    padding: 8px 16px;
    font-size: 13px;
    font-weight: 400;
    color: var(--text-muted);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all 0.18s;
    background: none;
    border-top: none;
    border-left: none;
    border-right: none;
    font-family: inherit;
  }
  .tab-btn:hover { color: var(--text-secondary); }
  .tab-btn.active { color: var(--text-primary); font-weight: 600; border-bottom-color: var(--accent); }

  /* Waveform */
  .waveform-container {
    position: relative;
    height: 240px;
    overflow: hidden;
    border-radius: 10px;
  }
  .waveform-canvas { width: 100%; height: 100%; }

  /* â”€â”€ PLAYER BAR â”€â”€ */
  .player-bar {
    grid-column: 2;
    background: var(--bg-panel);
    border-top: 1px solid var(--border);
    display: flex;
    align-items: center;
    padding: 0 32px;
    gap: 20px;
    height: var(--player-h);
  }

  .player-controls { display: flex; align-items: center; gap: 8px; }
  .ctrl-btn {
    width: 32px; height: 32px;
    border-radius: 50%;
    background: none;
    border: none;
    color: var(--text-secondary);
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: all 0.15s;
  }
  .ctrl-btn:hover { color: var(--text-primary); }
  .ctrl-btn.play {
    width: 36px; height: 36px;
    background: var(--text-primary);
    color: var(--bg-deep);
  }
  .ctrl-btn.play:hover { background: var(--accent); color: #fff; }
  .ctrl-btn svg { width: 14px; height: 14px; }
  .ctrl-btn.play svg { width: 13px; height: 13px; }

  .volume-wrap {
    display: flex; align-items: center; gap: 6px;
  }
  .volume-wrap svg { width: 14px; height: 14px; color: var(--text-muted); }

  .now-playing {
    display: flex;
    align-items: center;
    gap: 10px;
    min-width: 160px;
  }
  .np-thumb {
    width: 40px; height: 40px;
    border-radius: 6px;
    background: linear-gradient(135deg, #3a1a2a, #1a3a2a);
    flex-shrink: 0;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
  }
  .np-title { font-size: 13px; font-weight: 500; color: var(--text-primary); }
  .np-artist { font-size: 11px; color: var(--text-secondary); margin-top: 1px; }

  .progress-wrap {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .time { font-size: 11px; color: var(--text-muted); min-width: 30px; }
  .time.right { text-align: right; }

  .progress-track {
    flex: 1;
    height: 4px;
    background: var(--bg-card);
    border-radius: 2px;
    cursor: pointer;
    position: relative;
    overflow: visible;
  }
  .progress-fill {
    height: 100%;
    border-radius: 2px;
    background: linear-gradient(90deg, var(--accent), #7b9ef8);
    position: relative;
    transition: width 0.1s;
  }
  .progress-fill::after {
    content: '';
    position: absolute;
    right: -4px; top: 50%;
    transform: translateY(-50%);
    width: 10px; height: 10px;
    border-radius: 50%;
    background: #fff;
    box-shadow: 0 0 6px var(--accent-glow);
    opacity: 0;
    transition: opacity 0.15s;
  }
  .progress-track:hover .progress-fill::after { opacity: 1; }

  input[type=range] {
    -webkit-appearance: none;
    appearance: none;
    height: 4px;
    border-radius: 2px;
    background: var(--bg-card);
    outline: none;
    cursor: pointer;
    width: 70px;
  }
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 10px; height: 10px;
    border-radius: 50%;
    background: var(--text-secondary);
    cursor: pointer;
    transition: background 0.15s;
  }
  input[type=range]:hover::-webkit-slider-thumb { background: var(--accent); }

  /* â”€â”€ IMPORT MODAL â”€â”€ */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
  }
  .modal-overlay.open { opacity: 1; pointer-events: all; }
  .modal {
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 28px;
    width: 500px;
    max-width: 95vw;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    transform: translateY(10px);
    transition: transform 0.2s;
  }
  .modal-overlay.open .modal { transform: translateY(0); }
  .modal-title {
    font-family: 'Syne', sans-serif;
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 6px;
  }
  .modal-sub { font-size: 13px; color: var(--text-secondary); margin-bottom: 20px; line-height: 1.5; }
  .modal textarea {
    width: 100%;
    height: 160px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px;
    color: var(--text-primary);
    font-family: 'DM Mono', 'Courier New', monospace;
    font-size: 12px;
    resize: none;
    outline: none;
    line-height: 1.7;
    margin-bottom: 16px;
    transition: border-color 0.2s;
  }
  .modal textarea:focus { border-color: var(--accent); }
  .modal textarea::placeholder { color: var(--text-muted); }
  .modal-actions { display: flex; gap: 8px; justify-content: flex-end; }
  .modal-cancel {
    padding: 8px 18px;
    border-radius: 8px;
    background: none;
    border: 1px solid var(--border);
    color: var(--text-secondary);
    font-size: 13px;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.15s;
  }
  .modal-cancel:hover { background: var(--bg-hover); color: var(--text-primary); }
  .modal-import {
    padding: 8px 18px;
    border-radius: 8px;
    background: var(--accent);
    border: none;
    color: #fff;
    font-size: 13px;
    font-weight: 500;
    font-family: inherit;
    cursor: pointer;
    transition: opacity 0.15s;
  }
  .modal-import:hover { opacity: 0.9; }

  /* â”€â”€ ANIMATIONS â”€â”€ */
  @keyframes wave-pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
  }

  .playing-indicator {
    display: flex;
    align-items: flex-end;
    gap: 2px;
    height: 14px;
  }
  .playing-indicator span {
    width: 3px;
    border-radius: 1px;
    background: var(--accent);
    animation: bar-bounce 0.8s ease-in-out infinite;
  }
  .playing-indicator span:nth-child(2) { animation-delay: 0.15s; }
  .playing-indicator span:nth-child(3) { animation-delay: 0.3s; }
  @keyframes bar-bounce {
    0%, 100% { height: 4px; }
    50% { height: 12px; }
  }

  /* Notification */
  .toast {
    position: fixed;
    bottom: 90px;
    left: 50%;
    transform: translateX(-50%) translateY(10px);
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px 18px;
    font-size: 13px;
    color: var(--text-primary);
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s;
    z-index: 200;
    white-space: nowrap;
  }
  .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
</style>
</head>
<body>

<div class="app">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-section-label">App</div>
    <div class="nav-item active" onclick="switchView('explore', this)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
      Explore
    </div>
    <div class="nav-item" onclick="switchView('suggest', this)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 18a2 2 0 0 1-2 2H3l-1 1V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"/></svg>
      Suggest
    </div>
    <div class="nav-item" onclick="switchView('charts', this)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
      Top Charts
    </div>
    <div class="nav-item" onclick="switchView('new', this)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
      New stuff
    </div>

    <div class="sidebar-section-label">Personal</div>
    <div class="nav-item" onclick="switchView('favorite', this)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
      Favorite
    </div>
    <div class="nav-item" onclick="switchView('albums', this)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
      Albums
    </div>
    <div class="nav-item" onclick="switchView('playlists', this)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
      Playlists
    </div>
    <div class="nav-item" onclick="switchView('genres', this)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
      Genres
    </div>

    <div class="sidebar-spacer"></div>

    <div class="create-btn" onclick="openImportModal()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
      Create playlist
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <!-- TOPBAR -->
    <div class="topbar">
      <div class="nav-arrows">
        <button onclick="goBack()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"/></svg>
        </button>
        <button onclick="goForward()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg>
        </button>
      </div>
      <div class="search-bar">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" placeholder="Search music" oninput="handleSearch(this.value)">
      </div>
      <div class="topbar-right">
        <span class="login-btn">Login</span>
        <button class="more-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="5" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="12" cy="19" r="1"/></svg>
        </button>
      </div>
    </div>

    <!-- VIEWS -->
    <div class="views">

      <!-- EXPLORE VIEW -->
      <div class="view active" id="view-explore">
        <div class="explore-section-title">Explore new</div>
        <div class="artist-grid" id="artist-grid">
          <!-- populated by JS -->
        </div>

        <div class="two-col">
          <div>
            <div class="explore-section-title" style="font-size:16px;margin-bottom:12px;">Popular</div>
            <div class="popular-list" id="popular-list">
              <!-- populated by JS -->
            </div>
          </div>
          <div class="mood-section">
            <div class="explore-section-title" style="font-size:16px;margin-bottom:12px;">Mood</div>
            <div class="mood-grid">
              <div class="mood-card" onclick="filterMood('ghetto-rap')">Ghetto Rap</div>
              <div class="mood-card" onclick="filterMood('twerk')">Twerk Baby</div>
              <div class="mood-card" onclick="filterMood('party')">Party Breaker</div>
              <div class="mood-card" onclick="filterMood('valentine')">Valentine Vibe</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ARTIST/SOUND VIEW -->
      <div class="view" id="view-artist">
        <div class="artist-header">
          <div class="artist-cover" id="artist-cover">ðŸŽµ</div>
          <div class="artist-meta">
            <div class="artist-big-name" id="artist-big-name">Zak Abel</div>
            <div class="artist-subtitle" id="artist-subtitle">Love Song</div>
            <div class="artist-actions">
              <button class="follow-btn" onclick="toggleFollow(this)">Follow</button>
              <div class="dots-btn">Â·Â·Â·</div>
            </div>
          </div>
          <div class="artist-followers">2,630,809 followers</div>
        </div>

        <div class="tabs">
          <button class="tab-btn" onclick="switchTab('album', this)">Album</button>
          <button class="tab-btn active" onclick="switchTab('sound', this)">Sound</button>
          <button class="tab-btn" onclick="switchTab('equalizer', this)">Equalizer</button>
        </div>

        <div class="waveform-container">
          <canvas class="waveform-canvas" id="waveCanvas"></canvas>
        </div>
      </div>

      <!-- PLAYLISTS VIEW -->
      <div class="view" id="view-playlists">
        <div class="explore-section-title">Playlists</div>
        <div class="popular-list" id="playlist-view-list">
          <!-- populated by JS -->
        </div>
      </div>

      <!-- FAVORITE VIEW -->
      <div class="view" id="view-favorite">
        <div class="explore-section-title">Favorites</div>
        <div class="popular-list" id="fav-list">
          <div style="color:var(--text-muted);font-size:13px;text-align:center;padding:40px 0;">No favorites yet. Click â™¥ on any track.</div>
        </div>
      </div>

      <!-- GENERIC VIEWS -->
      <div class="view" id="view-suggest">
        <div class="explore-section-title">Suggestions</div>
        <p style="color:var(--text-secondary);font-size:13px;line-height:1.7;">Based on your listening history, you might enjoy these artists and tracks.</p>
      </div>
      <div class="view" id="view-charts">
        <div class="explore-section-title">Top Charts</div>
        <div class="popular-list" id="charts-list"></div>
      </div>
      <div class="view" id="view-new">
        <div class="explore-section-title">New Releases</div>
        <div class="artist-grid" id="new-grid"></div>
      </div>
      <div class="view" id="view-albums">
        <div class="explore-section-title">Albums</div>
        <div class="artist-grid" id="albums-grid"></div>
      </div>
      <div class="view" id="view-genres">
        <div class="explore-section-title">Genres</div>
        <div class="mood-grid" style="grid-template-columns:repeat(3,1fr);gap:10px;">
          <div class="mood-card">Pop</div><div class="mood-card">Hip-Hop</div><div class="mood-card">R&B</div>
          <div class="mood-card">Electronic</div><div class="mood-card">Jazz</div><div class="mood-card">Rock</div>
        </div>
      </div>

    </div>
  </main>

  <!-- PLAYER BAR -->
  <div class="player-bar">
    <div class="player-controls">
      <button class="ctrl-btn" onclick="prevTrack()">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 20L9 12l10-8v16z"/><rect x="5" y="4" width="2" height="16"/></svg>
      </button>
      <button class="ctrl-btn play" id="playBtn" onclick="togglePlay()">
        <svg id="playIcon" viewBox="0 0 24 24" fill="currentColor"><polygon points="5,3 19,12 5,21"/></svg>
      </button>
      <button class="ctrl-btn" onclick="nextTrack()">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 4l10 8-10 8V4z"/><rect x="17" y="4" width="2" height="16"/></svg>
      </button>
    </div>

    <div class="volume-wrap">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
      <input type="range" id="volumeSlider" min="0" max="100" value="80" oninput="setVolume(this.value)">
    </div>

    <div class="now-playing">
      <div class="np-thumb" id="np-thumb">ðŸŽµ</div>
      <div>
        <div class="np-title" id="np-title">Drank In My Cup</div>
        <div class="np-artist" id="np-artist">Kirko Bangz</div>
      </div>
    </div>

    <div class="progress-wrap">
      <span class="time" id="currentTime">2:36</span>
      <div class="progress-track" id="progressTrack" onclick="seekTo(event)">
        <div class="progress-fill" id="progressFill" style="width: 46%"></div>
      </div>
      <span class="time right" id="totalTime">5:39</span>
    </div>
  </div>
</div>

<!-- IMPORT MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-title">Import Playlist</div>
    <div class="modal-sub">Paste your track list below. Use the format:<br>
    <code style="font-size:11px;color:var(--accent);">Title | Artist | https://dropbox.com/.../song.mp3?raw=1</code>
    </div>
    <textarea id="importTextarea" placeholder="Love Song | Zak Abel | https://www.dropbox.com/.../love-song.mp3?raw=1
Kombucha Burps | Kendrik Lamar | https://www.dropbox.com/.../kombucha.mp3?raw=1"></textarea>
    <div class="modal-actions">
      <button class="modal-cancel" onclick="closeImportModal()">Cancel</button>
      <button class="modal-import" onclick="importTracks()">Import</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<audio id="audioEl"></audio>

<script>
// â”€â”€ DATA â”€â”€
let tracks = [
  { id: 1, title: 'Love Song', artist: 'Zak Abel', duration: '3:23', emoji: 'ðŸŽµ', url: '' },
  { id: 2, title: 'Kombucha Burps', artist: 'Kendrik Lamar', duration: '5:36', emoji: 'ðŸŽ¤', url: '' },
  { id: 3, title: 'On The Regular', artist: 'Avicii ft. Derulo', duration: '2:39', emoji: 'ðŸŽ§', url: '' },
  { id: 4, title: 'El Sambroso', artist: 'Kaytranada', duration: '3:26', emoji: 'ðŸŽ¼', url: '' },
  { id: 5, title: 'Mask Off Soul Flip', artist: 'ESTA', duration: '6:29', emoji: 'ðŸŽ¹', url: '' },
];

let currentTrackIndex = 0;
let isPlaying = false;
const audio = document.getElementById('audioEl');

// â”€â”€ RENDER â”€â”€
function renderExplore() {
  // Artist grid
  const grid = document.getElementById('artist-grid');
  grid.innerHTML = tracks.map((t, i) => `
    <div class="artist-card" onclick="openArtist(${i})">
      <div class="artist-thumb">
        <div class="artist-thumb-placeholder">${t.emoji}</div>
      </div>
      <div class="artist-name">${t.artist}</div>
      <div class="artist-song">${t.title}</div>
    </div>
  `).join('');

  // Popular list
  renderList('popular-list', tracks);
  renderList('charts-list', [...tracks].reverse());
  renderList('playlist-view-list', tracks);

  // New grid & Albums grid
  document.getElementById('new-grid').innerHTML = document.getElementById('albums-grid').innerHTML = document.getElementById('artist-grid').innerHTML;
}

function renderList(containerId, list) {
  const el = document.getElementById(containerId);
  if (!el) return;
  el.innerHTML = list.map((t, i) => `
    <div class="track-row ${currentTrackIndex === tracks.indexOf(t) && isPlaying ? 'playing' : ''}" onclick="playTrack(${tracks.indexOf(t)})">
      <div class="track-num">
        ${currentTrackIndex === tracks.indexOf(t) && isPlaying
          ? '<div class="playing-indicator"><span></span><span></span><span></span></div>'
          : (i + 1)}
      </div>
      <div class="track-thumb-sm">${t.emoji}</div>
      <div class="track-info">
        <div class="track-title">${t.title}</div>
      </div>
      <div class="track-duration">${t.duration}</div>
      <button class="track-more" onclick="event.stopPropagation()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="5" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="12" cy="19" r="1"/></svg>
      </button>
    </div>
  `).join('');
}

// â”€â”€ NAVIGATION â”€â”€
let navHistory = ['explore'];
let navPos = 0;

function switchView(viewName, el) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  const v = document.getElementById('view-' + viewName);
  if (v) v.classList.add('active');
  if (el) el.classList.add('active');
  navHistory = navHistory.slice(0, navPos + 1);
  navHistory.push(viewName);
  navPos = navHistory.length - 1;
}

function goBack() {
  if (navPos > 0) { navPos--; activateView(navHistory[navPos]); }
}
function goForward() {
  if (navPos < navHistory.length - 1) { navPos++; activateView(navHistory[navPos]); }
}
function activateView(name) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  const v = document.getElementById('view-' + name);
  if (v) v.classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n => {
    if (n.getAttribute('onclick') && n.getAttribute('onclick').includes("'" + name + "'")) n.classList.add('active');
    else n.classList.remove('active');
  });
}

// â”€â”€ ARTIST VIEW â”€â”€
function openArtist(idx) {
  const t = tracks[idx];
  document.getElementById('artist-big-name').textContent = t.artist;
  document.getElementById('artist-subtitle').textContent = t.title;
  document.getElementById('artist-cover').textContent = t.emoji;
  switchView('artist', null);
  drawWaveform();
  playTrack(idx);
}

// â”€â”€ TABS â”€â”€
function switchTab(tab, el) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  if (tab === 'sound') drawWaveform();
}

// â”€â”€ WAVEFORM â”€â”€
let waveAnim;
function drawWaveform() {
  const canvas = document.getElementById('waveCanvas');
  if (!canvas) return;
  const ctx = canvas.getContext('2d');
  canvas.width = canvas.offsetWidth * window.devicePixelRatio;
  canvas.height = canvas.offsetHeight * window.devicePixelRatio;
  ctx.scale(window.devicePixelRatio, window.devicePixelRatio);

  const W = canvas.offsetWidth, H = canvas.offsetHeight;
  let t = 0;

  function draw() {
    ctx.clearRect(0, 0, W, H);
    const waves = [
      { amp: 40, freq: 0.018, speed: 0.6, color: 'rgba(79,110,247,0.7)', lw: 1.5 },
      { amp: 60, freq: 0.012, speed: 0.4, color: 'rgba(79,110,247,0.4)', lw: 1, dash: [4,4] },
      { amp: 25, freq: 0.025, speed: 0.9, color: 'rgba(123,158,248,0.5)', lw: 1 },
    ];
    waves.forEach(wave => {
      ctx.beginPath();
      ctx.lineWidth = wave.lw;
      ctx.strokeStyle = wave.color;
      if (wave.dash) ctx.setLineDash(wave.dash);
      else ctx.setLineDash([]);
      for (let x = 0; x <= W; x++) {
        const y = H / 2 + wave.amp * Math.sin(x * wave.freq + t * wave.speed)
                        * Math.sin(x * 0.004 + t * 0.3);
        x === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      }
      ctx.stroke();
    });
    // horizontal line
    ctx.beginPath();
    ctx.strokeStyle = 'rgba(79,110,247,0.8)';
    ctx.lineWidth = 1;
    ctx.setLineDash([]);
    ctx.moveTo(0, H / 2);
    ctx.lineTo(W, H / 2);
    ctx.stroke();
    t += 0.05;
    waveAnim = requestAnimationFrame(draw);
  }
  if (waveAnim) cancelAnimationFrame(waveAnim);
  draw();
}

// â”€â”€ PLAYBACK â”€â”€
function playTrack(idx) {
  currentTrackIndex = idx;
  const t = tracks[idx];
  document.getElementById('np-title').textContent = t.title;
  document.getElementById('np-artist').textContent = t.artist;
  document.getElementById('np-thumb').textContent = t.emoji;

  if (t.url) {
    audio.src = t.url;
    audio.play().catch(() => {});
    isPlaying = true;
  } else {
    isPlaying = true;
    simulateProgress(t.duration);
  }
  updatePlayBtn();
  renderExplore();
  showToast('â–¶ Now playing: ' + t.title);
}

function togglePlay() {
  if (tracks[currentTrackIndex].url && audio.src) {
    if (isPlaying) { audio.pause(); isPlaying = false; }
    else { audio.play(); isPlaying = true; }
  } else {
    isPlaying = !isPlaying;
    if (isPlaying) simulateProgress(tracks[currentTrackIndex].duration);
  }
  updatePlayBtn();
}

function updatePlayBtn() {
  const icon = document.getElementById('playIcon');
  icon.innerHTML = isPlaying
    ? '<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>'
    : '<polygon points="5,3 19,12 5,21"/>';
}

function nextTrack() {
  playTrack((currentTrackIndex + 1) % tracks.length);
}
function prevTrack() {
  playTrack((currentTrackIndex - 1 + tracks.length) % tracks.length);
}

// Simulate progress for tracks without a URL
let progressTimer;
function simulateProgress(durationStr) {
  clearInterval(progressTimer);
  const parts = durationStr.split(':').map(Number);
  const total = parts[0] * 60 + parts[1];
  let elapsed = 0;
  document.getElementById('totalTime').textContent = durationStr;
  progressTimer = setInterval(() => {
    if (!isPlaying) { clearInterval(progressTimer); return; }
    elapsed++;
    if (elapsed >= total) { clearInterval(progressTimer); nextTrack(); return; }
    const pct = (elapsed / total) * 100;
    document.getElementById('progressFill').style.width = pct + '%';
    const m = Math.floor(elapsed / 60);
    const s = elapsed % 60;
    document.getElementById('currentTime').textContent = m + ':' + String(s).padStart(2, '0');
  }, 1000);
}

// Real audio events
audio.addEventListener('timeupdate', () => {
  if (!audio.duration) return;
  const pct = (audio.currentTime / audio.duration) * 100;
  document.getElementById('progressFill').style.width = pct + '%';
  const m = Math.floor(audio.currentTime / 60);
  const s = Math.floor(audio.currentTime % 60);
  document.getElementById('currentTime').textContent = m + ':' + String(s).padStart(2, '0');
});
audio.addEventListener('ended', nextTrack);

function seekTo(e) {
  const track = document.getElementById('progressTrack');
  const pct = e.offsetX / track.offsetWidth;
  if (audio.duration) { audio.currentTime = pct * audio.duration; }
  document.getElementById('progressFill').style.width = (pct * 100) + '%';
}

function setVolume(val) { audio.volume = val / 100; }

// â”€â”€ SEARCH â”€â”€
function handleSearch(query) {
  const q = query.toLowerCase().trim();
  if (!q) { renderExplore(); return; }
  const results = tracks.filter(t =>
    t.title.toLowerCase().includes(q) || t.artist.toLowerCase().includes(q)
  );
  renderList('popular-list', results);
}

// â”€â”€ IMPORT MODAL â”€â”€
function openImportModal() {
  document.getElementById('modalOverlay').classList.add('open');
}
function closeImportModal() {
  document.getElementById('modalOverlay').classList.remove('open');
}
function importTracks() {
  const raw = document.getElementById('importTextarea').value.trim();
  if (!raw) { closeImportModal(); return; }
  const lines = raw.split('\n').filter(l => l.trim());
  let added = 0;
  lines.forEach(line => {
    const parts = line.split('|').map(p => p.trim());
    if (parts.length >= 2) {
      const title = parts[0] || 'Unknown';
      const artist = parts[1] || 'Unknown';
      const url = parts[2] || '';
      const emojis = ['ðŸŽµ','ðŸŽ¤','ðŸŽ§','ðŸŽ¼','ðŸŽ¹','ðŸ¥','ðŸŽ¸','ðŸŽº','ðŸŽ»'];
      tracks.push({
        id: Date.now() + Math.random(),
        title,
        artist,
        duration: '0:00',
        emoji: emojis[tracks.length % emojis.length],
        url,
      });
      added++;
    }
  });
  closeImportModal();
  renderExplore();
  showToast(`âœ“ ${added} track${added > 1 ? 's' : ''} imported!`);
  document.getElementById('importTextarea').value = '';
}

// â”€â”€ FOLLOW â”€â”€
function toggleFollow(btn) {
  const following = btn.textContent === 'Following';
  btn.textContent = following ? 'Follow' : 'Following';
  btn.style.color = following ? '' : 'var(--accent)';
  btn.style.borderColor = following ? '' : 'var(--accent)';
}

// â”€â”€ MOOD â”€â”€
function filterMood(mood) {
  showToast('ðŸŽ­ Filtering by mood: ' + mood.replace('-', ' '));
}

// â”€â”€ TOAST â”€â”€
let toastTimer;
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 2500);
}

// â”€â”€ MODAL CLOSE ON OVERLAY CLICK â”€â”€
document.getElementById('modalOverlay').addEventListener('click', function(e) {
  if (e.target === this) closeImportModal();
});

// â”€â”€ INIT â”€â”€
renderExplore();
</script>
</body>
</html>
